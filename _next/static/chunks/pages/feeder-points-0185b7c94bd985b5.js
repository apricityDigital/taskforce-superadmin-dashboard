(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{4622:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3756:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4464:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4976:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},6895:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},7764:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},3718:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4933:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9461:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(4297);let i=(0,a.Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},3088:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/feeder-points",function(){return s(7696)}])},5140:function(e,t,s){"use strict";s.d(t,{D:function(){return DataService}});var a=s(9828),i=s(7889);let DataService=class DataService{static async getDashboardStats(){try{let[e,t,s,n,r,l,d,c]=await Promise.all([(0,a.PL)((0,a.hJ)(i.db,"approvedUsers")),(0,a.PL)((0,a.IO)((0,a.hJ)(i.db,"approvedUsers"),(0,a.ar)("isActive","==",!0))),(0,a.PL)((0,a.IO)((0,a.hJ)(i.db,"accessRequests"),(0,a.ar)("status","==","pending"))),(0,a.PL)((0,a.hJ)(i.db,"complianceReports")),(0,a.PL)((0,a.hJ)(i.db,"inspections")),(0,a.PL)((0,a.hJ)(i.db,"feederPoints")),(0,a.PL)((0,a.hJ)(i.db,"teams")),(0,a.PL)((0,a.hJ)(i.db,"ipRecords"))]),o=e.docs.map(e=>({id:e.id,...e.data()})),m=t.docs.map(e=>({id:e.id,...e.data()})),x=o.filter(e=>"admin"===e.role).length,u=o.filter(e=>"task_force_team"===e.role).length,h=o.filter(e=>"commissioner"===e.role).length,p=o.filter(e=>!e.isActive).length,g=m.filter(e=>"admin"===e.role).length,y=m.filter(e=>"task_force_team"===e.role).length,f=m.filter(e=>"commissioner"===e.role).length;return{totalUsers:e.size,activeUsers:t.size,pendingRequests:s.size,totalComplaints:n.size,totalInspections:r.size,totalFeederPoints:l.size,totalTeams:d.size,totalIPRecords:c.size,adminUsers:x,taskForceUsers:u,commissionerUsers:h,inactiveUsers:p,activeAdmins:g,activeTaskForce:y,activeCommissioners:f}}catch(e){return console.error("Error fetching dashboard stats:",e),{totalUsers:0,activeUsers:0,pendingRequests:0,totalComplaints:0,totalInspections:0,totalFeederPoints:0,totalTeams:0,totalIPRecords:0,adminUsers:0,taskForceUsers:0,commissionerUsers:0,inactiveUsers:0,activeAdmins:0,activeTaskForce:0,activeCommissioners:0}}}static onUsersChange(e){let t=(0,a.IO)((0,a.hJ)(i.db,"approvedUsers"),(0,a.Xo)("createdAt","desc"));return(0,a.cf)(t,t=>{let s=t.docs.map(e=>({id:e.id,...e.data()}));e(s)})}static async getAllUsers(){let e=(0,a.IO)((0,a.hJ)(i.db,"approvedUsers")),t=await (0,a.PL)(e),s=t.docs.map(e=>({id:e.id,...e.data()}));return s}static onAccessRequestsChange(e){let t=(0,a.IO)((0,a.hJ)(i.db,"accessRequests"),(0,a.Xo)("createdAt","desc"));return(0,a.cf)(t,t=>{let s=t.docs.map(e=>({id:e.id,...e.data()}));e(s)})}static onComplaintsChange(e){let t=(0,a.IO)((0,a.hJ)(i.db,"complaints"),(0,a.Xo)("createdAt","desc"));return(0,a.cf)(t,t=>{let s=t.docs.map(e=>({id:e.id,...e.data()}));e(s)})}static async getAllComplaints(){let e=(0,a.IO)((0,a.hJ)(i.db,"complaints")),t=await (0,a.PL)(e),s=t.docs.map(e=>({id:e.id,...e.data()}));return s}static async getAllComplianceReports(){let e=(0,a.IO)((0,a.hJ)(i.db,"complianceReports"),(0,a.Xo)("submittedAt","desc")),t=await (0,a.PL)(e),s=t.docs.map(e=>({id:e.id,...e.data()}));return s}static onComplianceReportsChange(e){let t=(0,a.IO)((0,a.hJ)(i.db,"complianceReports"),(0,a.Xo)("submittedAt","desc"));return(0,a.cf)(t,t=>{let s=t.docs.map(e=>({id:e.id,...e.data()}));e(s)})}static async updateComplianceReportStatus(e,t,s,n){try{let r={status:t,reviewedAt:(0,a.Bt)(),updatedAt:(0,a.Bt)()};s&&(r.adminNotes=s),n&&(r.reviewedBy=n),await (0,a.r7)((0,a.JU)(i.db,"complianceReports",e),r),console.log("✅ Compliance report status updated:",e,t)}catch(e){throw console.error("❌ Error updating compliance report status:",e),e}}static onIPRecordsChange(e){let t=(0,a.IO)((0,a.hJ)(i.db,"ipRecords"),(0,a.Xo)("registeredAt","desc"));return(0,a.cf)(t,t=>{let s=t.docs.map(e=>({id:e.id,...e.data()}));e(s)})}static onFeederPointsChange(e){let t=(0,a.IO)((0,a.hJ)(i.db,"feederPoints"));return(0,a.cf)(t,t=>{let s=t.docs.map(e=>({id:e.id,...e.data()}));e(s)})}static async getAllFeederPoints(){let e=(0,a.IO)((0,a.hJ)(i.db,"feederPoints")),t=await (0,a.PL)(e),s=t.docs.map(e=>({id:e.id,...e.data()}));return s}static onTeamsChange(e){let t=(0,a.IO)((0,a.hJ)(i.db,"teams"));return(0,a.cf)(t,t=>{let s=t.docs.map(e=>({id:e.id,...e.data()}));e(s)})}static async updateFeederPoint(e,t){let s=(0,a.JU)(i.db,"feederPoints",e);await (0,a.r7)(s,t)}static async createFeederPoint(e){let t=(0,a.hJ)(i.db,"feederPoints");await (0,a.pl)((0,a.JU)(t),e,{merge:!0})}static async deleteFeederPoint(e){let t=(0,a.JU)(i.db,"feederPoints",e);await (0,a.oe)(t)}static async createSampleFeederPoints(){let e=(0,a.hJ)(i.db,"feederPoints");for(let t of[{name:"FP-001",status:"active",priority:"high",location:{address:"123 Main St",latitude:34.0522,longitude:-118.2437}},{name:"FP-002",status:"maintenance",priority:"medium",location:{address:"456 Oak Ave",latitude:34.0522,longitude:-118.2437}},{name:"FP-003",status:"inactive",priority:"low",location:{address:"789 Pine Ln",latitude:34.0522,longitude:-118.2437}}])await (0,a.pl)((0,a.JU)(e),t)}static async getRecentActivity(){try{let e=(0,a.IO)((0,a.hJ)(i.db,"recentActivity"),(0,a.Xo)("timestamp","desc"),(0,a.b9)(10)),t=await (0,a.PL)(e),s=t.docs.map(e=>({id:e.id,...e.data()}));return s}catch(e){return console.error("Error fetching recent activity:",e),[]}}static async approveAccessRequest(e){try{let t=(0,a.JU)(i.db,"accessRequests",e.id);await (0,a.r7)(t,{status:"approved",reviewedAt:(0,a.Bt)(),reviewedBy:"AdminUserPlaceholder",updatedAt:(0,a.Bt)()}),console.log("✅ Access request approved:",e.id)}catch(e){throw console.error("❌ Error approving access request:",e),e}}static async rejectAccessRequest(e){try{let t=(0,a.JU)(i.db,"accessRequests",e);await (0,a.r7)(t,{status:"rejected",reviewedAt:(0,a.Bt)(),reviewedBy:"AdminUserPlaceholder",updatedAt:(0,a.Bt)()}),console.log("✅ Access request rejected:",e)}catch(e){throw console.error("❌ Error rejecting access request:",e),e}}static async updateComplaint(e,t){try{let s=(0,a.JU)(i.db,"complaints",e);await (0,a.r7)(s,{...t,updatedAt:(0,a.Bt)()}),console.log("✅ Complaint updated:",e)}catch(e){throw console.error("❌ Error updating complaint:",e),e}}static async deleteComplaint(e){try{await (0,a.oe)((0,a.JU)(i.db,"complaints",e)),console.log("✅ Complaint deleted:",e)}catch(e){throw console.error("❌ Error deleting complaint:",e),e}}static async testDatabaseConnection(){try{console.log("Attempting to fetch collections from Firestore...");let e=await Promise.all([(0,a.PL)((0,a.hJ)(i.db,"approvedUsers")),(0,a.PL)((0,a.hJ)(i.db,"accessRequests")),(0,a.PL)((0,a.hJ)(i.db,"complianceReports")),(0,a.PL)((0,a.hJ)(i.db,"feederPoints")),(0,a.PL)((0,a.hJ)(i.db,"teams"))]);return console.log("Successfully fetched collections:"),console.log("- approvedUsers: ".concat(e[0].size," documents")),console.log("- accessRequests: ".concat(e[1].size," documents")),console.log("- complianceReports: ".concat(e[2].size," documents")),console.log("- feederPoints: ".concat(e[3].size," documents")),console.log("- teams: ".concat(e[4].size," documents")),!0}catch(e){return console.error("Error testing database connection:",e),!1}}static async getUserReports(e){let t=(0,a.IO)((0,a.hJ)(i.db,"complianceReports"),(0,a.ar)("userId","==",e)),s=await (0,a.PL)(t);return s.docs.map(e=>({id:e.id,...e.data()}))}static async getUserFeederPoints(e){let t=(0,a.IO)((0,a.hJ)(i.db,"feederPoints"),(0,a.ar)("assignedUserId","==",e)),s=await (0,a.PL)(t);return s.docs.map(e=>({id:e.id,...e.data()}))}static async updateUser(e,t){let s=(0,a.JU)(i.db,"approvedUsers",e);await (0,a.r7)(s,t)}static async deleteUser(e){let t=(0,a.JU)(i.db,"approvedUsers",e);await (0,a.oe)(t)}}},7889:function(e,t,s){"use strict";s.d(t,{db:function(){return r}});var a=s(3977),i=s(9828);let n=(0,a.ZF)({apiKey:"AIzaSyAUl-1iNJo7MjMgKk_vBaBKeDNEYVSxSDE",authDomain:"task-force-b1ff7.firebaseapp.com",projectId:"task-force-b1ff7",storageBucket:"task-force-b1ff7.firebasestorage.app",messagingSenderId:"1029709761200",appId:"1:1029709761200:web:d051815003907ec7f14975"}),r=(0,i.ad)(n)},7696:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return FeederPointsPage}});var a=s(5893),i=s(7294),n=s(9461),r=s(4297);let l=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var d=s(3756),c=s(1408),o=s(9525),m=s(7764),x=s(9062),u=s(4976),h=s(4933),p=s(4622),g=s(4464),y=s(6895),f=s(3718),v=s(5140);function FeederPointsPage(){let[e,t]=(0,i.useState)([]),[s,r]=(0,i.useState)([]),[j,b]=(0,i.useState)([]),[N,w]=(0,i.useState)([]),[P,C]=(0,i.useState)([]),[k,F]=(0,i.useState)(!0),[A,U]=(0,i.useState)(""),[S,I]=(0,i.useState)("all"),[D,J]=(0,i.useState)("all"),[Z,L]=(0,i.useState)(null),[E,R]=(0,i.useState)(!1),[M,q]=(0,i.useState)(!1),[O,z]=(0,i.useState)(null),[T,_]=(0,i.useState)(!1),[B,X]=(0,i.useState)("connecting"),[V,H]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=v.D.onFeederPointsChange(e=>{t(e),F(!1)}),s=v.D.onTeamsChange(e=>{r(e)}),a=v.D.onUsersChange(e=>{b(e)});return()=>{e(),s(),a()}},[]),(0,i.useEffect)(()=>{if(e.length>0&&j.length>0&&s.length>0){let t=e.map(e=>{let t=null;if(e.assignedUserId){let s=j.find(t=>t.id===e.assignedUserId);s&&(t={type:"individual",name:s.name||"Unknown User",email:s.email||"",id:e.assignedUserId,role:s.role||"User"})}if(e.assignedTeamId){let i=s.find(t=>t.id===e.assignedTeamId);if(i){var a;let s=(null===(a=i.members)||void 0===a?void 0:a.filter(e=>e.isActive))||[];t={type:"team",name:i.name||"Unknown Team",memberCount:s.length,id:e.assignedTeamId,members:s}}}return{...e,assignmentDetails:t}});w(t)}},[e,s,j]),(0,i.useEffect)(()=>{filterFeederPoints()},[e,A,S,D]);let loadFeederPoints=async()=>{F(!0);let e=await v.D.getAllFeederPoints();t(e),F(!1)},filterFeederPoints=()=>{let e=N;A&&(e=e.filter(e=>{var t,s,a,i,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(A.toLowerCase()))||(null===(a=e.location)||void 0===a?void 0:null===(s=a.address)||void 0===s?void 0:s.toLowerCase().includes(A.toLowerCase()))||(null===(n=e.assignmentDetails)||void 0===n?void 0:null===(i=n.name)||void 0===i?void 0:i.toLowerCase().includes(A.toLowerCase()))})),"all"!==S&&(e=e.filter(e=>e.status===S)),"all"!==D&&("assigned"===D?e=e.filter(e=>e.assignmentDetails):"unassigned"===D?e=e.filter(e=>!e.assignmentDetails):"individual"===D?e=e.filter(e=>{var t;return(null===(t=e.assignmentDetails)||void 0===t?void 0:t.type)==="individual"}):"team"===D&&(e=e.filter(e=>{var t;return(null===(t=e.assignmentDetails)||void 0===t?void 0:t.type)==="team"}))),C(e)},handleViewDetails=e=>{L(e),R(!0)},handleEditFeederPoint=e=>{z({...e}),q(!0)},handleSaveFeederPoint=async()=>{if(O)try{await v.D.updateFeederPoint(O.id,O),await loadFeederPoints(),q(!1),z(null),alert("Feeder point updated successfully!")}catch(e){console.error("Error updating feeder point:",e),alert("Error updating feeder point. Please try again.")}},handleCreateFeederPoint=async e=>{try{await v.D.createFeederPoint(e),await loadFeederPoints(),_(!1),alert("Feeder point created successfully!")}catch(e){console.error("Error creating feeder point:",e),alert("Error creating feeder point. Please try again.")}},handleDeleteFeederPoint=async e=>{if(confirm('Are you sure you want to delete feeder point "'.concat(e.name,'"?')))try{await v.D.deleteFeederPoint(e.id),await loadFeederPoints(),alert("Feeder point deleted successfully!")}catch(e){console.error("Error deleting feeder point:",e),alert("Error deleting feeder point. Please try again.")}},createSampleData=async()=>{H(!0);try{await v.D.createSampleFeederPoints(),alert("Sample feeder points created successfully!"),await loadFeederPoints()}catch(e){console.error("Error creating sample data:",e),alert("Error creating sample data. Check console for details.")}finally{H(!1)}},getStatusColor=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},getPriorityColor=e=>{switch(e){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};if(k)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let K={total:N.length,active:N.filter(e=>"active"===e.status).length,maintenance:N.filter(e=>"maintenance"===e.status).length,inactive:N.filter(e=>"inactive"===e.status).length,assigned:N.filter(e=>e.assignmentDetails).length,unassigned:N.filter(e=>!e.assignmentDetails).length,individual:N.filter(e=>{var t;return(null===(t=e.assignmentDetails)||void 0===t?void 0:t.type)==="individual"}).length,team:N.filter(e=>{var t;return(null===(t=e.assignmentDetails)||void 0===t?void 0:t.type)==="team"}).length};return(0,a.jsxs)("div",{className:"space-y-6 scrollable-content",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n.Z,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Feeder Points Monitor"}),(0,a.jsx)("p",{className:"mt-1 text-sm sm:text-base text-gray-600",children:"Real-time monitoring of all feeder points and assignments"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>_(!0),className:"btn-primary flex items-center space-x-2",children:[(0,a.jsx)(l,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Create Feeder Point"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full text-sm ".concat("connected"===B?"bg-green-100 text-green-800":"error"===B?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("connected"===B?"bg-green-500":"error"===B?"bg-red-500":"bg-yellow-500")}),(0,a.jsx)("span",{children:"connected"===B?"Connected":"error"===B?"Connection Error":"Connecting..."})]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[(0,a.jsx)("div",{className:"stat-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg bg-blue-500",children:(0,a.jsx)(n.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Points"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:K.total})]})]})}),(0,a.jsx)("div",{className:"stat-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg bg-green-500",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:K.active})]})]})}),(0,a.jsx)("div",{className:"stat-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg bg-yellow-500",children:(0,a.jsx)(c.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Maintenance"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:K.maintenance})]})]})}),(0,a.jsx)("div",{className:"stat-card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg bg-purple-500",children:(0,a.jsx)(o.Z,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Assigned"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:K.assigned})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Status"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Assigned"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(K.assigned/K.total*100,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:K.assigned})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Unassigned"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"".concat(K.unassigned/K.total*100,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:K.unassigned})]})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Types"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Individual"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"".concat(K.assigned>0?K.individual/K.assigned*100:0,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:K.individual})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Team"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"".concat(K.assigned>0?K.team/K.assigned*100:0,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:K.team})]})]})]})]})]}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,a.jsx)("div",{className:"flex-1 max-w-md",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search feeder points...",value:A,onChange:e=>U(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("select",{value:S,onChange:e=>I(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,a.jsxs)("select",{value:D,onChange:e=>J(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"all",children:"All Assignments"}),(0,a.jsx)("option",{value:"assigned",children:"Assigned"}),(0,a.jsx)("option",{value:"unassigned",children:"Unassigned"}),(0,a.jsx)("option",{value:"individual",children:"Individual"}),(0,a.jsx)("option",{value:"team",children:"Team"})]})]})]})}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Feeder Points (",P.length,")"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Real-time data"})]})]}),(0,a.jsx)("div",{className:"scrollable-table",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Feeder Point"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignment"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Inspection"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map((e,t)=>{var s,i,r,l,d,c,m,x;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(n.Z,{className:"h-5 w-5 text-blue-600"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name||"Feeder Point ".concat(t+1)}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:(null===(s=e.location)||void 0===s?void 0:s.address)||e.address||((null===(i=e.location)||void 0===i?void 0:i.latitude)&&(null===(r=e.location)||void 0===r?void 0:r.longitude)?"".concat(e.location.latitude,", ").concat(e.location.longitude):"No location data")}),(null===(l=e.location)||void 0===l?void 0:l.latitude)&&(null===(d=e.location)||void 0===d?void 0:d.longitude)&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.location.latitude.toFixed(4),", ",e.location.longitude.toFixed(4)]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(getStatusColor(e.status)),children:e.status||"unknown"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.assignmentDetails?(0,a.jsxs)("div",{className:"flex items-center",children:["individual"===e.assignmentDetails.type?(0,a.jsx)(h.Z,{className:"h-4 w-4 text-blue-500 mr-2"}):(0,a.jsx)(o.Z,{className:"h-4 w-4 text-purple-500 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.assignmentDetails.name}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"individual"===e.assignmentDetails.type?"Individual":"Team (".concat(e.assignmentDetails.memberCount," members)")})]})]}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Unassigned"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(getPriorityColor(e.priority)),children:e.priority||"normal"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastInspection?(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-1"}),(null===(m=(x=e.lastInspection).toDate)||void 0===m?void 0:null===(c=m.call(x))||void 0===c?void 0:c.toLocaleDateString())||"Invalid date"]}):(0,a.jsx)("span",{className:"text-gray-400",children:"Never"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>handleViewDetails(e),className:"text-primary-600 hover:text-primary-900 mr-3",title:"View Details",children:(0,a.jsx)(g.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>handleEditFeederPoint(e),className:"text-yellow-600 hover:text-yellow-900 mr-3",title:"Edit Feeder Point",children:(0,a.jsx)(y.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>handleDeleteFeederPoint(e),className:"text-red-600 hover:text-red-900",title:"Delete Feeder Point",children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})]})]},e.id||t)})})]})}),0===P.length&&!k&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(n.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:0===e.length?"No feeder points in database":"No feeder points match your filters"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:0===e.length?"Feeder points will appear here when they are created in the mobile app.":A||"all"!==S||"all"!==D?"Try adjusting your search or filters.":"All feeder points are currently filtered out."}),0===e.length&&(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsx)("div",{className:"p-4 bg-blue-50 rounded-lg",children:(0,a.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,a.jsx)("strong",{children:"Debug Info:"})," Connected to database but no feeder points found. Check the browser console for more details."]})}),(0,a.jsx)("button",{onClick:createSampleData,disabled:V,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:V?"Creating Sample Data...":"Create Sample Feeder Points"})]})]})]})}),T&&(0,a.jsx)(FeederPointFormModal,{title:"Create Feeder Point",onClose:()=>_(!1),onSave:handleCreateFeederPoint}),M&&O&&(0,a.jsx)(FeederPointFormModal,{title:"Edit Feeder Point",feederPoint:O,onClose:()=>q(!1),onSave:handleSaveFeederPoint})]})}function FeederPointFormModal(e){var t;let{title:s,feederPoint:n,onClose:r,onSave:l}=e,[d,c]=(0,i.useState)(n||{}),handleChange=e=>{let{name:t,value:s}=e.target;c({...d,[t]:s})};return(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75",onClick:r}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl transform transition-all sm:max-w-lg sm:w-full",children:[(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s}),(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsx)("input",{type:"text",name:"name",value:d.name||"",onChange:handleChange,placeholder:"Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,a.jsx)("input",{type:"text",name:"location.address",value:(null===(t=d.location)||void 0===t?void 0:t.address)||"",onChange:handleChange,placeholder:"Address",className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),(0,a.jsxs)("select",{name:"status",value:d.status||"",onChange:handleChange,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"maintenance",children:"Maintenance"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,a.jsxs)("select",{name:"priority",value:d.priority||"",onChange:handleChange,className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{l(d)},className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 sm:ml-3 sm:w-auto sm:text-sm",children:"Save"}),(0,a.jsx)("button",{type:"button",onClick:r,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})}}},function(e){e.O(0,[16,868,774,888,179],function(){return e(e.s=3088)}),_N_E=e.O()}]);